### 拓扑排序

[AcWing 848. 有向图的拓扑序列](https://www.acwing.com/problem/content/850/)

+ 拓扑序列只适用于 AOV 网 （**有向无环图，这个是重点**），有向无环图一定至少存在一个入度为0的点。
+ 时间复杂度 O(n+m)，n 表示点数，m 表示边数
+ 当循环结束后，若队列的长度为n，则拓扑排序存在
+ 在添加边时，可以顺便统计入度
+ **这个算法本质上还是一个bfs**
+ **重点：推荐使用手写队列，因为队列数组q存储就是拓扑排序的顺序。**

```c
int d[N];       // 入度
int q[]

bool topsort()
{
    // 使用队列
    int hh = 0, tt = -1;
	
    // d[i] 存储点i的入度， 如果入度为0，加入队列
    for (int i = 1; i <= n; i ++ )
        if (!d[i]) q[ ++ tt] = i;

    while (hh <= tt)
    {
        int t = q[hh ++ ];

        for (int i = h[t]; i != -1; i = ne[i])
        {
            int j = e[i];
            if (-- d[j] == 0)// 删除边，如果入度为0，加入队列
                q[ ++ tt] = j;
        }
    }

    // 如果所有点都入队了，说明存在拓扑序列；否则不存在拓扑序列。
    return tt == n - 1;
}
```



#### 算法流程:

1. 用队列来执行，初始化将所有入度为 0 的顶点入队。

2. 主要由以下两步循环执行，直到不存在入度为 0 的顶点为止：

   + 选择一个入度为 0 的顶点，并将它输出；
   + 删除图中从顶点连出的所有边。

3. 循环结束，若输出的顶点数小于图中的顶点数，则表示该图存在回路，即无法拓扑排序，否则，输出的就是拓扑序列 （不唯一）。

